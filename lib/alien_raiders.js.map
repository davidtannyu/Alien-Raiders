{"version":3,"sources":["webpack:///webpack/bootstrap 968a9b2531c2cab647c2","webpack:///./lib/moving_object.js","webpack:///./lib/game.js","webpack:///./lib/game_view.js","webpack:///./lib/alien.js","webpack:///./lib/bullet.js","webpack:///./lib/player.js","webpack:///./lib/main.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;AC3CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;;;;;AC1FA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACbA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACRA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;AChCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC","file":"alien_raiders.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 968a9b2531c2cab647c2","class MovingObject {\n  constructor(options) {\n    this.pos = options.pos;\n    this.vel = options.vel;\n    this.image = options.image;\n    this.game = options.game;\n  }\n\n  loadBitmap(bitmap, stage) {\n    bitmap.x = this.pos[0];\n    bitmap.y = this.pos[1];\n    bitmap.scaleX = 32 / bitmap.image.width;\n    bitmap.scaleY = 32 / bitmap.image.height;\n    stage.addChild(bitmap);\n  }\n\n  move() {\n    this.pos[0] += this.vel[0];\n    this.pos[1] += this.vel[1];\n  }\n\n  draw(stage) {\n    this.bitmap = this.bitmap || new createjs.Bitmap(this.image);\n    this.image.onload = (event) => this.loadBitmap(this.bitmap,stage);\n    this.loadBitmap(this.bitmap, stage);\n  }\n\n  collideWith(movingObject) {\n    const x = this.pos[0];\n    const y = this.pos[1];\n    const otherX = movingObject.pos[0];\n    const otherY = movingObject.pos[1];\n    return ((x >= otherX) && (x <= (otherX + 32))) &&\n    ((y >= otherY) && (y <= (otherY + 32)));\n  }\n\n  withinBounds(dir) {\n    const bound = this.pos[0] + dir[0];\n    return bound >= 0 && bound < this.game.DIM_X;\n  }\n\n}\n\nmodule.exports = MovingObject;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/moving_object.js\n// module id = 0\n// module chunks = 0","const Player = require(\"./player\");\nconst Alien = require(\"./alien\");\n\nclass Game {\n  constructor() {\n    this.aliens = [];\n    this.bullet = null;\n    this.player = null;\n    this.DIM_X = 1024;\n    this.DIM_Y = 576;\n    this.paused = true;\n    this.score = 0;\n    this.over = false;\n  }\n\n  addAliens() {\n    const initialX = 320;\n    let x = initialX;\n    let y = 0;\n    let image = new Image();\n    image.src = \"./assets/alien.png\";\n\n    while (y < this.DIM_Y / 2) {\n      this.createAlien([x,y], image);\n      x += 32;\n      if (x >= this.DIM_X - initialX) {\n        x = initialX;\n        y += 32;\n      }\n    }\n  }\n\n  createAlien(pos, image) {\n    let alien = new Alien ({\n      pos,\n      vel: [1,0],\n      game: this,\n      image\n    });\n    this.aliens.push(alien);\n  }\n\n  addPlayer() {\n    const initialPos = [this.DIM_X / 2, this.DIM_Y - 32];\n    let image = new Image();\n    image.src = \"./assets/player.png\";\n    this.player = new Player({\n      initialPos,\n      pos: initialPos,\n      vel: [0,0],\n      game: this,\n      image\n    });\n    return this.player;\n  }\n\n  addBullet(bullet) {\n    if (!this.bullet) {\n      this.bullet = bullet;\n    }\n  }\n\n  noMoreAliens() {\n    return this.aliens.length === 0;\n  }\n\n  moveAliens(stage) {\n    let rebound = false;\n    if (this.noMoreAliens()) {\n      this.over = true;\n      return;\n    }\n    this.aliens.forEach( (alien,idx) => {\n      alien.move();\n      if (alien.pos[0] > this.DIM_X - 32 || alien.pos[0] < 0) {\n        rebound = true;\n      }\n      if (this.bullet && this.bullet.collideWith(alien)) {\n        this.handleDeadAlien(stage, idx);\n      } else if (this.player.collideWith(alien)) {\n        this.over = true;\n      } else {\n        alien.draw(stage);\n      }\n    });\n    this.reboundAliens(rebound);\n  }\n\n  handleDeadAlien(stage, alienIdx) {\n    stage.removeChild(this.aliens[alienIdx].bitmap);\n    stage.removeChild(this.bullet.bitmap);\n    this.bullet = null;\n    this.score += 100 * Math.abs(this.aliens[alienIdx].vel[0]);\n    this.aliens.splice(alienIdx, 1);\n  }\n\n  reboundAliens(rebound) {\n    if (rebound) {\n      this.aliens.forEach( alien => {\n        alien.vel[0] += (alien.vel[0] > 0) ? 0.5 : -0.5;\n        alien.rebound();\n      });\n    }\n  }\n\n  moveBullet(stage) {\n    if (this.bullet) {\n      this.bullet.move();\n      if (this.bullet.pos[1] < -32) {\n        stage.removeChild(this.bullet.bitmap);\n        this.bullet = null;\n      } else {\n        this.bullet.draw(stage);\n      }\n    }\n  }\n\n  draw(stage) {\n    if (!this.paused && !this.over) {\n      this.player.draw(stage);\n      this.moveBullet(stage);\n      this.moveAliens(stage);\n    }\n  }\n}\n\n\nmodule.exports = Game;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/game.js\n// module id = 1\n// module chunks = 0","class GameView {\n  constructor(game, stage, scoreEl, messageField) {\n    this.stage = stage;\n    this.game = game;\n    this.player = this.game.addPlayer();\n    this.game.addAliens();\n    this.scoreEl = scoreEl;\n    this.messageField = messageField;\n    this.MOVES = {\n      \"a\": [-32,  0],\n      \"d\": [ 32,  0],\n      \"left\": [-32,0],\n      \"right\": [32,0]\n    };\n  }\n\n  handleKeys() {\n    Object.keys(this.MOVES).forEach( (k) => {\n      let diffX = this.MOVES[k];\n      key(k, () => this.handleMove(diffX));\n    });\n    key(\"space\", this.handleFire.bind(this));\n    key(\"p\", this.handlePause.bind(this));\n  }\n\n  handleMove(diffX) {\n    const player = this.player;\n    if (!this.game.paused && player.withinBounds(diffX)) {\n      player.move(diffX);\n    }\n  }\n\n  handleFire() {\n    if (!this.game.paused) {\n      this.player.fire();\n    }\n  }\n\n  handlePause() {\n    const pause = !this.game.paused;\n    const messageField = this.messageField;\n    this.game.paused = pause;\n    if (pause) {\n      messageField.text = \"Game Paused\";\n      this.stage.addChild(messageField);\n    } else {\n      this.stage.removeChild(messageField);\n    }\n  }\n\n  start() {\n    this.handleKeys();\n    createjs.Ticker.setFPS(60);\n    createjs.Ticker.addEventListener(\"tick\",this.animate.bind(this));\n  }\n\n  animate(event) {\n    if (!this.game.paused && !this.game.over) {\n      this.game.draw(this.stage);\n    }\n    if (this.game.over) {\n      this.drawGameOver();\n    } else {\n      this.scoreEl.html(this.game.score);\n      this.stage.update(event);\n    }\n  }\n\n  drawGameOver() {\n    this.stage.removeAllChildren();\n    const gameOver = new Image ();\n    if (this.game.noMoreAliens()) {\n      gameOver.src = './assets/win.jpg';\n    } else {\n      gameOver.src = './assets/gameover.jpg';\n    }\n    gameOver.onload =  () => {\n      const gameOverBitmap = new createjs.Bitmap(gameOver);\n      gameOverBitmap.x = 0;\n      gameOverBitmap.y = 0;\n      gameOverBitmap.scaleX = this.game.DIM_X / gameOverBitmap.image.width;\n      gameOverBitmap.scaleY = this.game.DIM_Y / gameOverBitmap.image.height;\n      this.stage.addChild(gameOverBitmap);\n      this.stage.update();\n    };\n  }\n\n\n}\n\nmodule.exports = GameView;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/game_view.js\n// module id = 2\n// module chunks = 0","const MovingObject = require(\"./moving_object\");\n\nclass Alien extends MovingObject {\n  constructor(options) {\n    super(options);\n  }\n\n  rebound() {\n    this.pos[1] += 16;\n    this.vel[0] = 0 - this.vel[0];\n  }\n}\n\nmodule.exports = Alien;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/alien.js\n// module id = 3\n// module chunks = 0","const MovingObject = require(\"./moving_object\");\n\nclass Bullet extends MovingObject {\n  constructor(options) {\n    super(options);\n  }\n}\n\nmodule.exports = Bullet;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/bullet.js\n// module id = 4\n// module chunks = 0","const MovingObject = require(\"./moving_object\");\nconst Bullet = require(\"./bullet\");\n\nclass Player extends MovingObject {\n  constructor(options) {\n    super(options);\n    this.initialPos = options.initialPos;\n  }\n\n  move(direction) {\n    this.pos[0] += direction[0];\n    this.pos[1] += direction[1];\n  }\n\n  fire() {\n    let image = new Image();\n    image.src = \"./assets/bullet.png\";\n    const pos = [this.pos[0], this.pos[1] - 32];\n    const bullet = new Bullet( {\n      pos,\n      vel: [0,-10],\n      game: this,\n      image\n    });\n    this.game.addBullet(bullet);\n  }\n\n  revive() {\n    this.pos = this.initialPos;\n  }\n}\n\nmodule.exports = Player;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/player.js\n// module id = 5\n// module chunks = 0","const Game = require(\"./game\");\nconst GameView = require(\"./game_view\");\n\nfunction addMessageField(stage, canvas) {\n  const messageField = new createjs.Text(\"Press P to Start\", \"bold 24px Orbitron\", \"#FFFFFF\");\n\tmessageField.textAlign = \"center\";\n\tmessageField.textBaseline = \"middle\";\n  messageField.x = canvas.width / 2;\n\tmessageField.y = canvas.height / 2;\n\tstage.addChild(messageField);\n  return messageField;\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const canvasEl = $(\"canvas\")[0];\n  const game = new Game();\n  canvasEl.width = game.DIM_X;\n  canvasEl.height = game.DIM_Y;\n  let stage = new createjs.Stage(canvasEl);\n  const messageField = addMessageField(stage,canvasEl);\n  const initialX = 100;\n  const scoreEl = $(\"p.score\");\n  new GameView(game, stage, scoreEl, messageField).start();\n\n  const modal = document.getElementById('controls');\n  $(\"div.controls\").click( function() {\n    modal.style.display = \"block\";\n  });\n  const span = document.getElementsByClassName(\"close\")[0];\n  span.onclick = function() {\n    modal.style.display = \"none\";\n  };\n  window.onclick = function(event) {\n    if (event.target == modal) {\n        modal.style.display = \"none\";\n    }\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/main.js\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}